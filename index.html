<!DOCTYPE html>
<html lang="en-US">

<head>

<title>nbt-parser</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="nbt.js"></script>

<style>
  *, *::before, *::after {
    box-sizing: border-box;
  }
  body {
    font-family: sans-serif;
  }
</style>

</head>

<body>

<script>
(async () => {

const nbt = await fetchAsArrayBuffer("hello_world.nbt");
console.log(Array.from(new Uint8Array(nbt)));
console.log(bufferToHexString(nbt));
console.log(bufferToMarkupString(new Uint8Array(nbt)));

async function fetchAsArrayBuffer(url){
  const response = await fetch(url);
  const result = await response.arrayBuffer();
  return result;
}

function bufferToHexString(buffer){
  return Array.from(new Uint8Array(buffer)).map(item => item.toString(16).padStart(2,"0")).join("");
}

function bufferToBinaryString(bytes){
  return bytes.reduce((result,byte) => {
    const binaryString = byte.toString(2).padStart(8,"0");
    const characterString = String.fromCharCode(byte);
    const characterCode = characterString.charCodeAt(0);
    const characterValid = characterCode >= 32 && characterCode < 127;
    return `${result}${(result !== "") ? " " : ""}${(characterValid) ? characterString : byte.toString(10)}`;
  },"");
}

function bufferToMarkupString(bytes){
  return bytes.reduce((result,byte) => {
    const binaryString = byte.toString(2).padStart(8,"0");
    const characterString = String.fromCharCode(byte);
    const characterCode = characterString.charCodeAt(0);
    const characterValid = characterCode >= 32 && characterCode < 127;
    if (byte == 0) byte = "</end>";
    if (byte == 4) byte = "<long>";
    if (byte == 8) byte = "<string>";
    if (byte == 9) byte = "<list>";
    if (byte == 10) byte = "<compound>";
    if (byte == 11) byte = "<int-array>";
    return `${result}${(characterValid) ? characterString : byte.toString(10)}`;
  },"");
}

})();
</script>

</body>

</html>